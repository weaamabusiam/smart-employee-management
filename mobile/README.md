# אפליקציית נוכחות לעובדים (Flutter)

אפליקציה למעקב אחר נוכחות עובדים באמצעות Bluetooth. האפליקציה מזהה אוטומטית נוכחות עובדים ליד מכשירי ESP32 במשרד.

## 🎯 מה האפליקציה עושה

- **זיהוי אוטומטי**: מזהה נוכחות ליד מכשיר ESP32 במשרד
- **סטטוס בזמן אמת**: מציג נוכח/נעדר עם עדכונים כל 5 שניות
- **היסטוריה**: מציג שינויי נוכחות אחרונים
- **סיכום חודשי**: מציג שעות עבודה מצטברות לחודש
- **הגדרות**: הגדרת כתובת שרת

## 📱 מסכים

### 🏠 **סטטוס** (מסך ראשי)
- מציג סטטוס נוכחות נוכחי
- מציג סטטוס Bluetooth
- מציג מכשיר ESP32 שזוהה (אם נוכח)

### 📊 **היסטוריה**
- 10 שינויי נוכחות אחרונים
- רק מעברים בין נוכח/נעדר

### 📅 **חודשי**
- סיכום שעות עבודה לחודש נבחר
- פירוט יומי עם שעות עבודה

### 👤 **פרופיל**
- מידע אישי
- התנתקות

### ⚙️ **הגדרות**
- הגדרת IP ופורט של השרת
- בדיקת חיבור

## 🔧 איך זה עובד

1. **סריקה ברקע**: האפליקציה סורקת מכשירי ESP32 כל 30 שניות
2. **זיהוי**: אם ESP32 זוהה → דווח "נוכח"
3. **היעדרות**: אם לא זוהה 3 פעמים רצופות → דווח "נעדר"
4. **עדכון**: הסטטוס מתעדכן כל 5 שניות

## 🚀 התקנה

### דרישות
- Android 5.0+ או iOS 12.0+
- מכשיר ESP32 במשרד
- שרת Backend פועל

### שלבים
1. **התקנת תלויות**:
   ```bash
   flutter pub get
   ```

2. **הפעלת האפליקציה**:
   ```bash
   flutter run --release
   ```

3. **בניית APK**:
   ```bash
   flutter build apk --release
   ```

### הגדרה ראשונית
1. פתח את האפליקציה
2. לחץ על ⚙️ במסך ההתחברות
3. הגדר IP ופורט של השרת (ברירת מחדל: 10.0.0.4:3000)
4. התחבר עם שם משתמש וסיסמה

## 🔐 הרשאות נדרשות

האפליקציה תבקש:
- **Bluetooth**: לסריקת מכשירי ESP32
- **מיקום**: נדרש לסריקת Bluetooth ב-Android
- **התראות**: להתראת שירות רקע

## 🛠️ פתרון בעיות

### Bluetooth לא עובד
1. ודא ש-Bluetooth מופעל
2. הענק את כל ההרשאות
3. בדוק שמכשיר ESP32 פועל

### סריקה נעצרת (Android 13+)
**השבת אופטימיזציה לסוללה**:
- הגדרות → אפליקציות → אפליקציית נוכחות → סוללה → אופטימיזציה לסוללה → השבת

**הרשאות מיקום ברקע**:
- הגדרות → אפליקציות → אפליקציית נוכחות → הרשאות → מיקום → "תמיד"

### לא מתחבר לשרת
1. בדוק ששרת Backend פועל
2. אמת IP ופורט בהגדרות
3. ודא שהמכשיר ברשת זהה לשרת

**תכונות**:
- ✅ זיהוי נוכחות אוטומטי ברקע
- ✅ עדכונים כל 5 שניות
- ✅ היסטוריית שינויי סטטוס
- ✅ סיכום חודשי
- ✅ הגדרות API
- ✅ הרשאות מתקדמות

---

**נבנה עם Flutter** ❤️
